{{- $e := (index $.Site.Data.events (index (split ($.Page.Permalink | relURL) "/") 2)) -}}
{{- if $e -}}
    {{- $url := index $e (.Get "url-key") | default (printf "/events/%s/%s" $e.name (.Get "page")) -}}
    {{- $txt := index $e (.Get "text-key") | default (.Get "text") -}}
    <a href = "{{ $url }}">{{ $txt }}</a>
{{- else -}}
    {{- $url := (printf "/%s/%s" $.Page.File.Dir (.Get "page")) -}}
    {{- $txt := (.Get "text") -}}
    <a href = "{{ $url }}">{{ $txt }}</a>
{{- end -}}